<%- include('partials/header') %>

<section class="dashboard">
    <div class="container">
        <h2 class="dashboard-title">Resumes</h2>
        <div class="resume-grid">
            <!-- Create New Resume Card -->
            <div class="resume-card new-resume" onclick="window.location.href='/resume/builder'">
                <span class="plus-icon">+</span>
                <p>Create a new resume</p>
            </div>

            <!-- Existing Resumes -->
            <% if (resumes.length > 0) { %>
                <% resumes.forEach(resume => { %>
                    <div class="resume-card existing-resume-card" data-resume-id="<%= resume.id %>">
                        <div class="resume-content">
                            <h3><%= resume.name %></h3>
                            <p>Last updated: <%= resume.updatedAt %></p>
                        </div>
                        <!-- Dropdown Menu -->
                        <div class="resume-options">
                            <button class="options-btn" onclick="toggleDropdown('<%= resume.id %>')">â‹®</button>
                            <ul class="dropdown-menu" id="dropdown-<%= resume.id %>">
                                <li><a href="/resume/preview/<%= resume.id %>">Open</a></li>
                                <li><a href="#" onclick="renameResume('<%= resume.id %>')">Rename</a></li>
                                <li><a href="/resume/duplicate/<%= resume.id %>">Duplicate</a></li>
                                <li class="delete"><a href="#" onclick="deleteResume('<%= resume.id %>')">Delete</a></li>
                            </ul>
                        </div>
                    </div>
                <% }) %>
            <% } else { %>
                <p>No resumes available. Click "Create a new resume" to start.</p>
            <% } %>
        </div>
    </div>
</section>

<%- include('partials/footer') %>
